$bfg-gap: 1rem !default;

$bfg-padding: 0.5rem !default;

$bfg-fill: (
  border-radius: 2px,
  border-width: 1px,
  header-border: #d5d5d5,
  header-bg: #f6f6f6,
  content-border: #ddd,
  content-bg: #eee
) !default;

$bfg-breakpoints: (
  xs: 576px,
  sm: 768px,
  lg: 992px,
  xl: 1200px
) !default;

$bfg-header-height: 2rem !default;

@mixin bfg-media-breakpoint-up($size) {
  @media (min-width: map-get($bfg-breakpoints, $size)) {
    @content;
  }
}

@mixin bfg-media-breakpoint-down($size) {
  @media (max-width: map-get($bfg-breakpoints, $size) - 0.02) {
    @content;
  }
}

.bfg {
  display: flex;
  height: 100%; // Try to fit the parent node height when available

  .bfg {
    height: auto;
  }
}

.bfg--row {
  flex-direction: row;
}

.bfg--col {
  flex-direction: column;
}

.bfg--gap {
  margin: 0 (-$bfg-gap / 2);

  .bfg__box {
    padding: 0 ($bfg-gap / 2) $bfg-gap ($bfg-gap / 2);
  }

  .bfg {
    padding: 0;
  }
}

.bfg--wrap {
  flex-wrap: wrap;
}

.bfg__box {
  flex: 1 1 100%;
  position: relative;
  overflow: auto;
  box-sizing: border-box;
}

.bfg__box--fixed {
  flex: 0 0 auto;
}

@mixin bfg-boxes($size: '') {
  .bfg--row {
    > .bfg__box--#{$size + 1} { max-width: (100% / 12); }
    > .bfg__box--#{$size + 2} { max-width: (100% / 6); }
    > .bfg__box--#{$size + 3} { max-width: 25%; }
    > .bfg__box--#{$size + 4} { max-width: (100% / 3); }
    > .bfg__box--#{$size + 5} { max-width: (500% / 12); }
    > .bfg__box--#{$size + 6} { max-width: 50%; }
    > .bfg__box--#{$size + 7} { max-width: (700% / 12); }
    > .bfg__box--#{$size + 8} { max-width: (200% / 3); }
    > .bfg__box--#{$size + 9} { max-width: 75%; }
    > .bfg__box--#{$size + 10} { max-width: (1000% / 12); }
    > .bfg__box--#{$size + 11} { max-width: (1100% / 12); }
    > .bfg__box--#{$size + 12} { max-width: 100%; }

    &.bfg--#{$size + lines-2} > .bfg__box { height: 50%; }
    &.bfg--#{$size + lines-3} > .bfg__box { height: (100% / 3); }
    &.bfg--#{$size + lines-4} > .bfg__box { height: 25%; }
  }

  .bfg--col {
    > .bfg__box--#{$size + 1} { max-height: (100% / 12); }
    > .bfg__box--#{$size + 2} { max-height: (100% / 6); }
    > .bfg__box--#{$size + 3} { max-height: 25%; }
    > .bfg__box--#{$size + 4} { max-height: (100% / 3); }
    > .bfg__box--#{$size + 5} { max-height: (500% / 12); }
    > .bfg__box--#{$size + 6} { max-height: 50%; }
    > .bfg__box--#{$size + 7} { max-height: (700% / 12); }
    > .bfg__box--#{$size + 8} { max-height: (200% / 3); }
    > .bfg__box--#{$size + 9} { max-height: 75%; }
    > .bfg__box--#{$size + 10} { max-height: (1000% / 12); }
    > .bfg__box--#{$size + 11} { max-height: (1100% / 12); }
    > .bfg__box--#{$size + 12} { max-height: 100%; }

    &.bfg--#{$size + lines-2} > .bfg__box { width: 50%; }
    &.bfg--#{$size + lines-3} > .bfg__box { width: (100% / 3); }
    &.bfg--#{$size + lines-4} > .bfg__box { width: 25%; }
  }

  .bfg--#{$size + disabled} {
    display: block;
    height: auto;

    .bfg__box {
      display: block;
      max-width: none;
      max-height: none;
      width: auto;
      height: auto;
    }
  }
}

@include bfg-boxes(); // any screen size even greater than "xl"

@include bfg-media-breakpoint-down(xl) {
  @include bfg-boxes(xl-);
}

@include bfg-media-breakpoint-down(lg) {
  @include bfg-boxes(lg-);
}

@include bfg-media-breakpoint-down(sm) {
  @include bfg-boxes(sm-);
}

@include bfg-media-breakpoint-down(xs) {
  @include bfg-boxes(xs-);
}

.bfg__header {
  padding: 0 $bfg-padding;
  box-sizing: border-box;
  position: relative;
  z-index: 2;
  overflow: hidden;
  height: $bfg-header-height;
  line-height: $bfg-header-height;
  font-size: 1rem;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.bfg__content {
  padding: $bfg-padding;
  box-sizing: border-box;
  position: relative;
  z-index: 1;
  overflow: auto;
  width: 100%;
  height: 100%;
}

.bfg__content--nopad {
  padding: 0;
}

.bfg__header + .bfg__content {
  height: calc(100% - #{$bfg-header-height});
  border-top: none;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}

.bfg--overflow .bfg__box,
.bfg--overflow .bfg__content,
.bfg__box--overflow,
.bfg__box--overflow .bfg__content {
  overflow: visible;
}

@mixin bfg-filler($name, $fill) {
  .bfg__header--#{$name} {
    border-radius: map-get($fill, border-radius) map-get($fill, border-radius) 0 0;
    border: map-get($fill, border-width) solid map-get($fill, header-border);
    background-color: map-get($fill, header-bg);
    line-height: calc(#{$bfg-header-height} - #{2 * map-get($fill, border-width)});
  }

  .bfg__content--#{$name} {
    border-radius: map-get($fill, border-radius);
    border: map-get($fill, border-width) solid map-get($fill, content-border);
    background-color: map-get($fill, content-bg);
  }
}

@include bfg-filler(fill, $bfg-fill);
