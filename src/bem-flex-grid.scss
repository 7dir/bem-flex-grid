$bfg-space: 1rem !default;

$bfg-breakpoint: 640px !default;

$bfg-min-height: 240px !default;

$bfg-fill: (
  padding: 0.5rem,
  border-radius: 2px,
  border: #ddd,
  background: #eee
) !default;

@media (min-width: ($bfg-breakpoint + 1)) {
  .bfg {
    display: flex;
    flex-wrap: wrap;
    height: 100%; // Try to fit the parent node height when available

    .bfg {
      height: auto;
    }
  }

  .bfg__box {
    position: relative;
    box-sizing: border-box;
    flex: 0 1 auto;
    display: flex;
  }

  .bfg__box--grow {
    flex-grow: 1;
  }

  .bfg--row {
    flex-direction: row;

    > .bfg__box--12 { flex-basis: 100%; max-width: 100%; }
    > .bfg__box--11 { flex-basis: calc(1100% / 12); max-width: calc(1100% / 12); }
    > .bfg__box--10 { flex-basis: calc(1000% / 12); max-width: calc(1000% / 12); }
    > .bfg__box--9 { flex-basis: 75%; max-width: 75%; }
    > .bfg__box--8 { flex-basis: calc(200% / 3); max-width: calc(200% / 3); }
    > .bfg__box--7 { flex-basis: calc(700% / 12); max-width: calc(700% / 12); }
    > .bfg__box--6 { flex-basis: 50%; max-width: 50%; }
    > .bfg__box--5 { flex-basis: calc(500% / 12); max-width: calc(500% / 12); }
    > .bfg__box--4 { flex-basis: calc(100% / 3); max-width: calc(100% / 3); }
    > .bfg__box--3 { flex-basis: 25%; max-width: 25%; }
    > .bfg__box--2 { flex-basis: calc(100% / 6); max-width: calc(100% / 6); }
    > .bfg__box--1 { flex-basis: calc(100% / 12); max-width: calc(100% / 12); }
  }

  .bfg--col {
    flex-direction: column;

    > .bfg__box--12 { flex-basis: 100%; max-height: 100%; }
    > .bfg__box--11 { flex-basis: calc(1100% / 12); max-height: calc(1100% / 12); }
    > .bfg__box--10 { flex-basis: calc(1000% / 12); max-height: calc(1000% / 12); }
    > .bfg__box--9 { flex-basis: 75%; max-height: 75%; }
    > .bfg__box--8 { flex-basis: calc(200% / 3); max-height: calc(200% / 3); }
    > .bfg__box--7 { flex-basis: calc(700% / 12); max-height: calc(700% / 12); }
    > .bfg__box--6 { flex-basis: 50%; max-height: 50%; }
    > .bfg__box--5 { flex-basis: calc(500% / 12); max-height: calc(500% / 12); }
    > .bfg__box--4 { flex-basis: calc(100% / 3); max-height: calc(100% / 3); }
    > .bfg__box--3 { flex-basis: 25%; max-height: 25%; }
    > .bfg__box--2 { flex-basis: calc(100% / 6); max-height: calc(100% / 6); }
    > .bfg__box--1 { flex-basis: calc(100% / 12); max-height: calc(100% / 12); }
  }

  .bfg__content {
    flex: 1 0 auto;
    overflow: auto;
    max-width: 100%;
    max-height: 100%;
  }

  .bfg--spaced {
    margin: 0 (-$bfg-space / 2);

    &, & .bfg {
      > * {
        padding: 0 ($bfg-space / 2);
      }
    }

    & .bfg {
      padding: 0;
    }
  }
}

@media (max-width: $bfg-breakpoint) {
  .bfg__content {
    min-height: $bfg-min-height;
  }
}

.bfg--spaced {
  .bfg__content {
    margin-bottom: $bfg-space;
  }
}

@mixin bem-flex-grid-fill($name, $fill) {
  .bfg__content--#{$name} {
    padding: map-get($fill, padding);
    box-sizing: border-box;
    border-radius: map-get($fill, border-radius);
    border: 1px solid map-get($fill, border);
    background-color: map-get($fill, background);
  }
}

@include bem-flex-grid-fill(fill, $bfg-fill);
